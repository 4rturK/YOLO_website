<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>YOLO WebApp — Upload zdjęcia</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/styles.css">
</head>

<body class="bg-dark text-light">

<div class="container py-5">
    <h1 class="text-center mb-4">Detekcja Obiektów — YOLO (wersja bez analizy)</h1>

    <form method="POST" enctype="multipart/form-data" class="card p-4 bg-secondary text-light">
        <label class="form-label">Wybierz zdjęcie do wysłania:</label>
        <input type="file" name="image" accept="image/*" class="form-control mb-3" required>

        <button class="btn btn-warning w-100">Wyślij zdjęcie</button>
    </form>

    {% if processed_image %}
    <div class="results-container">
        <!-- Sekcja ze zdjęciem -->
        <div class="image-box">
            <h3>Wynik analizy:</h3>
            <!-- KLUCZOWA ZMIANA: Użycie url_for('uploaded_file', ...) -->
            <img src="{{ url_for('uploaded_file', filename=processed_image) }}" alt="Przetworzone zdjęcie">
            
            <br><br>
            <small>Oryginał:</small><br>
            <img src="{{ url_for('uploaded_file', filename=uploaded_image) }}" alt="Oryginał">
        </div>

        <!-- Sekcja z listą wykrytych obiektów -->
        <div class="info-box">
            <h3>Wykryte obiekty ({{ detections|length }}):</h3>
            {% if detections %}
                <div style="max-height: 400px; overflow-y: auto;">
                    {% for item in detections %}
                    <div class="detection-item">
                        <span class="badge">{{ item.name }}</span>
                        <span class="confidence">{{ item.confidence }}%</span>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <p>Nie wykryto żadnych obiektów.</p>
            {% endif %}
        </div>
    </div>
    {% endif %}


</div>

</body>
</html>
